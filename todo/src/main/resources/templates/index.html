
<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="utf-8">
<head th:replace="common/head"></head>

<body ondragstart="return false" onselectstart="return false">

	<div class="jumbotron todo_main_area" id="wrapper">
		<!-- Page Content -->
		<div id="" class="todo_main">
			<div class="row">
				<div class="col-md-12">
					<nav th:replace="common/nav"></nav>
					<div th:if="${session.user_info} !=null" class="welcome_area">
						'Welcome !'+ [[${session.user_info.nickName} + ' ^-^']]</div>
					<h1 class="title">
						<span>My Todo</span>
					</h1>
				</div>
			</div>
			<div class="container-fluid">
				<form method="post" action="/calender">
					<div id="todo" th:each="Todo : ${list_real}"
						th:attr="id=${Todo.id},color=${Todo.color}">
						<div style="display: inline-block" class="todo_total">
							<p th:text="${Todo.title}"></p>
							<div class="comp_btn_total">
								<th:block th:each="num: ${#numbers.sequence(1, Todo.count)}">
									<input type="checkbox" name="btn" value="btn">
								</th:block>
							</div>
						</div>
					</div>
					<!-- 					<a class="nav-link" href="todo"> <i class="fas fa-plus fa-5x"></i></a> -->
				</form>
			</div>

			<div th:replace="common/footer"></div>


		</div>
		<!-- /#page-content-wrapper -->

	</div>
	<!-- /#wrapper -->


	<!-- 	Bootstrap core JavaScript-->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		$("[name=btn]").change(function() {
			if ($(this).is(":checked")) {
				var todo_id = $(this).parent().parent().parent().attr('id');
				var realCount = 1;
				var objParams = {
					"todo_id" : todo_id,
					"realCount" : realCount
				// 揶쏆뮇�땾 �빊遺쏙옙, 揶쏆뮇�땾 揶쏅Ŋ�꺖
				}

				$.ajax({
					url : "/todo_result",
					type : "post",
					data : objParams,
					success : function(res) {
						alert('submit')
					},
					error : function(request, status, error) {
						alert('error')
					}
				})
			} else {
				var todo_id = $(this).parent().parent().parent().attr('id');
				var realCount = -1;
				var objParams = {
					"todo_id" : todo_id,
					"realCount" : realCount
				// 媛쒖닔 異붽�, 媛쒖닔 媛먯냼
				}

				$.ajax({
					url : "/todo_result",
					type : "post",
					data : objParams,
					success : function(res) {
						alert('submit ')
					},
					error : function(request, status, error) {
						alert('error')
					}
					
				})
				
			}
		
		});

		/* this is daehyeonpark NoNoNoNoNoNoNO */
		$("div.todo_total").click(function(event) {
			if (event.target.type == 'checkbox')
				return;
			else 
				$("form").submit();
			return false;
		});

		$(function() {
			var invite = /*[[${inviteinform}]]*/
			console.log(invite.bool1);
			console.log(invite);
			if (invite.bool1) {
				var confirmflag = confirm(invite.nickName1 + "friend with me?");
				var objParams = {
					"invite" : invite.id,
					"confirmflag" : confirmflag
				};

				$.ajax({

					url : "/home",
					data : objParams,
					type : "post",
					success : function(res) {
						alert('submit')
					},
					error : function(request, status, error) {
						console.log(error)
					}

				})
				return false;
			}
		});
		/*]]>*/


	</script>





</body>

</html>
